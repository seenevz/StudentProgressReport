<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <meta http-equiv='X-UA-Compatible' content='ie=edge' />
  <title>Document</title>
</head>

<body>
  <a
    href="javascript:var batchDomainURL='https://learn.co/api/v1/batches';function getBatchFromInput(){const e=document.baseURI,t='input the batch ID\n\n(If you're on a Learn's cohort page, it will have default value of the batch)';if(e.includes('learn.co')){const n=e.includes('learn.co/batches')?getInput(t,e.split('/')[4]):getInput(t);return parseInt(n)}throw alert('You're not on a Learn.co page'),{message:'exit'}}function getInput(e=',t='){try{const n=prompt(e,t);if(null===n)throw'exit';if(n.match(/[\D]/))throw'Invalid input';return n}catch(n){if(n.includes('exit'))throw{message:'exit'};return getInput(e.includes('You can only input numbers')?e:'You can only input numbers!\n\n'+e,t)}}async function getTracksFromBatch(){const e=getBatchFromInput(),t=`${batchDomainURL}/${e}`,n=await fetch(t).then(e=>e.json());if(n.error)throw'404'===n.status?{message:'It looks like that batch doesn't exist!'}:{message:`<br/><br/>It looks like that batch is broken!<br/><br/><a href='https://learn.co/batches/${e}'>Check if the batch page is working</a>`};return{batchName:n.iteration[0].toUpperCase()+n.iteration.substr(1),batchInfo:n,id:e}}function textGenerator(e){return e.map(e=>`ID: ${e.track_id} => ${e.title}`).join('\n\n')}function selectCurrentTrack({batchInfo:e,batchName:t}){const n=e.active_track_id;return getInput(`These are the tracks available for ${t}\n\nEnter track ID from selection bellow:\n\n(Active track selected by default)\n\n ${textGenerator(e.tracks)}`,n)}async function init(){try{let e=await getTracksFromBatch(),t=e.id,n=selectCurrentTrack(e),o=`${batchDomainURL}/${t}/tracks/${n}/progress`,r=`${batchDomainURL}/${t}/tracks/${n}/deployed`,a=fetch(o).then(e=>e.json()),s=fetch(r).then(e=>e.json()),c=await Promise.all([a,s]);if(c[0].error||c[1].error)throw{message:'This track doesn't seem to belong to this batch!'};getIndividualData(c[0].map(e=>(e.lessons=[],e)),c[1],t,e.batchName)}catch(e){if(e.message.includes('exit'))return;displayErrorWindow(`Ooops! Something went wrong!\n\n${e.message}`),console.error(e.message)}}function getIndividualData(e,t,n,o){let r=[],a=1;const s=createPopupWin(),c=showFetchPrgress(s);t.topics.forEach(e=>{e.units.forEach(e=>{e.lessons.forEach(e=>{let t=fetch(`${batchDomainURL}/${n}/lessons/${e.node.id}`).then(e=>{return updateFetchCounter(`Fetched ${a} ${a>1?'lessons':'lesson'}`,c),a++,e.json()});r.push(t)})})}),Promise.all(r).then(t=>{compileResults(e,t,s,o)})}function compileResults(e,t,n,o){t.forEach(t=>{t.students.forEach(n=>{let o,r=e.find(e=>e.id===n.id);n.completed_at?o='âœ… ':n.started_at&&!n.completed_at?o='ðŸ’ª ':n.started_at||(o='âŒ '),o+=t.title,r.lessons.push(o)})}),renderStudentProgress(e,n,o)}function displayErrorWindow(e){win=createPopupWin(),p=showFetchPrgress(win),p.innerHTML=e,win.document.body.innerHTML=',win.document.body.append(p)}function showFetchPrgress(e){const t=e.document.createElement('p');return t.style.margin='0 auto',e.document.body.append(t),t}function updateFetchCounter(e,t){t.innerText=e}function renderStudentLessons(e){return e.map(e=>{const t=document.createElement('li');return t.innerText=e,t})}function renderStudent(e){const t=document.createElement('div'),n=document.createElement('h3'),o=document.createElement('ul');o.style.listStyleType='none',o.style.overflow='hidden',o.style.transition='max-height 1.5s ease 0s',o.style.height='auto',o.style.maxHeight='4500px',o.style.maxHeight='0px',n.style.display='inline-block',n.style.margin='10px 0',n.style.cursor='pointer';const r=renderStudentLessons(e.lessons);return n.innerText=e.full_name,o.append(...r),n.addEventListener('click',function(){o.style.maxHeight='0px'===o.style.maxHeight?'5000px':'0px'}),t.append(n,o),t}function createPopupWin(){const e=`left=${window.outerWidth/4},top=${window.outerHeight/4},height=${window.innerHeight/6*4},width=${window.innerWidth/2},locations=no,zoom`;try{const t=window.open(','_tab',e);if(!t)throw'No pop-ups allowed';return t.document.body.style.maxWidth='600px',t.document.body.style.margin='0 auto',t.document.body.style.color='#5c5c5c',t.document.body.style.backgroundColor='White',t.document.body.style.fontFamily=''Aktiv Grotesk', 'Helvetica Neue', Helvetica, Arial, sans-serif',t}catch(e){alert('You need to allow pop-up windows for Learn.co\n\nYou should have an icon on the right side of your URL bar that allows pop-up windows.')}}function renderStudentProgress(e,t,n){const o=document.createElement('div'),r=document.createElement('ul'),a=document.createElement('h1');a.style.textAlign='center',a.style.margin='8% 0',a.innerText=`Lab completion list for ${n}`;const s=e.map(e=>renderStudent(e));r.append(...s),o.append(a,r),t.document.body.querySelectorAll('*').forEach(e=>e.remove()),t.document.body.append(o)}init();">Student
    Labs
    Completion</a>
</body>

</html>